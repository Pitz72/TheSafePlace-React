/* Self-hosted Font */
@font-face {
  font-family: 'VT323';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/fonts/VT323-Regular.ttf') format('truetype');
}

@tailwind base;
@tailwind components;
@tailwind utilities;

body {
  font-family: 'VT323', monospace;
  background-color: #000;
  overflow: hidden;
}

/* NOTA: Riduzione globale RIMOSSA - causava problemi a tutte le schermate */
/* Ora SOLO il GameScreen ha dimensioni aumentate tramite .game-screen-container */

/* --- Theme System using CSS Variables --- */

/* 1. Standard Theme (Default) */
.theme-standard {
  --bg-primary: #000;
  --text-primary: #4ade80; /* green-400 */
  --text-secondary: #d1d5db; /* gray-300 */
  --text-accent: #facc15; /* yellow-400 */
  --text-danger: #ef4444; /* red-500 */
  --border-primary: rgba(74, 222, 128, 0.3);
  --border-accent: rgba(250, 204, 21, 0.5);
  --highlight-bg: var(--text-primary);
  --highlight-text: var(--bg-primary);
  --shadow-primary: rgba(74, 222, 128, 0.3);
  --shadow-accent: rgba(250, 204, 21, 0.2);
  --scanline-opacity: 0;
  --vignette-opacity: 0;
  --text-glow: 0 0 5px var(--shadow-primary);
}

/* 2. Green Phosphor CRT Theme - PREMIUM QUALITY */
.theme-crt {
  --bg-primary: #0a0f0a;
  --text-primary: #33ff33; /* Authentic P3 phosphor green */
  --text-secondary: #33ff33;
  --text-accent: #66ff66; /* Brighter phosphor for highlights */
  --text-danger: #66ff66;
  --border-primary: rgba(51, 255, 51, 0.4);
  --border-accent: rgba(102, 255, 102, 0.5);
  --highlight-bg: var(--text-primary);
  --highlight-text: #000;
  --shadow-primary: rgba(51, 255, 51, 0.6);
  --shadow-accent: rgba(102, 255, 102, 0.4);
  --scanline-opacity: 0.08;
  --vignette-opacity: 1;
  /* Premium phosphor glow with persistence and chromatic aberration */
  --text-glow:
    0 0 4px #33ff33,
    0 0 8px #33ff33,
    0 0 12px #33ff33,
    0 0 16px rgba(51, 255, 51, 0.5),
    0 0 2px rgba(255, 100, 100, 0.3);
}

/* 3. High Contrast Theme - FIXED */
.theme-high_contrast {
  --bg-primary: #000;
  --text-primary: #fff;
  --text-secondary: #fff;
  --text-accent: #fff;
  --text-danger: #fff;
  --border-primary: #fff;
  --border-accent: #fff;
  --highlight-bg: #fff;
  --highlight-text: #000;
  --shadow-primary: transparent;
  --shadow-accent: transparent;
  --scanline-opacity: 0;
  --vignette-opacity: 0;
  --text-glow: none;
}
/* Removed problematic !important rules that likely broke the negative hover effect */

/* --- Base Game Styles using Variables --- */
#game-container {
  color: var(--text-primary);
  text-shadow: var(--text-glow);
  border-color: var(--border-primary);
  position: relative;
}

/* Apply CRT-specific filters and animations - PREMIUM */
.theme-crt #game-container > .w-full.h-full.relative {
  animation: text-wobble 0.12s linear infinite, phosphor-flicker 0.08s infinite;
  filter: blur(0.3px) contrast(1.1) brightness(1.05);
  /* Subtle screen curvature simulation */
  transform: perspective(1000px) rotateX(0deg);
}

/* --- CRT Effects - PREMIUM QUALITY --- */

/* Scanlines - More realistic with varying intensity */
#game-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  background-image:
    repeating-linear-gradient(
      0deg,
      rgba(0, 0, 0, 0) 0px,
      rgba(0, 0, 0, 0.05) 1px,
      rgba(0, 0, 0, 0.15) 2px,
      rgba(0, 0, 0, 0.05) 3px,
      rgba(0, 0, 0, 0) 4px
    );
  background-size: 100% 4px;
  opacity: var(--scanline-opacity);
  animation: scanline-scroll 12s linear infinite;
  z-index: 100;
}

/* Vignette & Screen Glow - Enhanced */
#game-container::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  background:
    radial-gradient(ellipse at center,
      rgba(0,0,0,0) 0%,
      rgba(0,0,0,0.3) 60%,
      rgba(0,0,0,0.7) 85%,
      rgba(0,0,0,0.95) 100%
    );
  box-shadow:
    inset 0 0 200px 40px rgba(0,0,0,0.8),
    inset 0 0 80px 10px rgba(51, 255, 51, 0.05);
  opacity: var(--vignette-opacity);
  animation: crt-flicker 0.18s infinite;
  z-index: 99;
}


/* Custom animations for the game */

/* CRT Horizontal Wobble - Simulates magnetic field instability */
@keyframes text-wobble {
  0% { transform: translate3d(0, 0, 0); }
  20% { transform: translate3d(0.3px, -0.2px, 0); }
  40% { transform: translate3d(-0.3px, 0.2px, 0); }
  60% { transform: translate3d(0.2px, 0.3px, 0); }
  80% { transform: translate3d(-0.2px, -0.3px, 0); }
  100% { transform: translate3d(0, 0, 0); }
}

/* Phosphor Persistence Flicker - Simulates phosphor decay */
@keyframes phosphor-flicker {
  0% { opacity: 1; }
  50% { opacity: 0.98; }
  100% { opacity: 1; }
}

/* Scanline Scroll - Slower for more authentic feel */
@keyframes scanline-scroll {
  0% { background-position-y: 0px; }
  100% { background-position-y: -200px; }
}

/* CRT Flicker - Simulates power supply fluctuation */
@keyframes crt-flicker {
  0%, 100% { opacity: var(--vignette-opacity); }
  10% { opacity: calc(var(--vignette-opacity) * 0.95); }
  20% { opacity: var(--vignette-opacity); }
  30% { opacity: calc(var(--vignette-opacity) * 0.97); }
  40%, 60% { opacity: var(--vignette-opacity); }
  70% { opacity: calc(var(--vignette-opacity) * 0.96); }
  80%, 90% { opacity: var(--vignette-opacity); }
}

/* Yellow Flash - For UI elements */
@keyframes yellow-flash {
  50% {
    color: var(--text-accent);
    text-shadow: 0 0 10px var(--text-accent);
  }
}

/* Cursor Blink */
@keyframes cursor-blink {
  50% {
    opacity: 0;
  }
}

.animate-yellow-flash {
  animation: yellow-flash 1.5s infinite;
}

.animate-cursor-blink {
  animation: cursor-blink 1s step-end infinite;
}

/* --- Aumento Font Specifico per PRESENTS_SCREEN --- */
/* Sovrascrivo le classi Tailwind SOLO per questa schermata */
.presents-screen-content-box p,
.presents-screen-content-box {
  font-size: 1.68rem !important; /* Aumentato +20% per leggibilità ottimale */
  line-height: 1.5 !important;
}
.presents-screen-content-box .presents-title {
  font-size: 2.4rem !important; /* Titolo +20% più grande */
}
.presents-screen-content-box .presents-signature {
  font-size: 1.44rem !important; /* Firma +20% più leggibile */
}

/* --- Aumento Font Specifico per GAME_SCREEN (Interfaccia di Gioco) --- */
/* Sovrascrivo le classi Tailwind SOLO per la schermata di gioco */
/* Questo aumenta la leggibilità dei pannelli statistiche, inventario, ecc. */
.game-screen-container .text-xs { font-size: 1.27rem !important; }   /* +10% aggiuntivo */
.game-screen-container .text-sm { font-size: 1.45rem !important; }   /* +10% aggiuntivo */
.game-screen-container .text-base { font-size: 1.65rem !important; }  /* +10% aggiuntivo */
.game-screen-container .text-lg { font-size: 1.90rem !important; }   /* +10% aggiuntivo */
.game-screen-container .text-xl { font-size: 2.16rem !important; }   /* +10% aggiuntivo */
.game-screen-container .text-2xl { font-size: 2.53rem !important; }   /* +10% aggiuntivo */
.game-screen-container .text-3xl { font-size: 3.17rem !important; }  /* +10% aggiuntivo */
.game-screen-container .text-4xl { font-size: 3.80rem !important; }  /* +10% aggiuntivo */
/* Nota: Aumento finale del ~69% rispetto ai valori standard Tailwind */