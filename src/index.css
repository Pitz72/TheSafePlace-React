/* Import IBM Plex Mono - Font IBM PC/MS-DOS Compatibile */
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Force IBM Plex Mono as default font for all elements */
* {
  font-family: 'IBM Plex Mono', 'Courier New', 'Consolas', 'Monaco', 'Menlo', 'Ubuntu Mono', 'DejaVu Sans Mono', monospace !important;
}

/* Tema globale fosfori verdi anni '80 - CSS Nativo */
:root {
  /* Font IBM PC/MS-DOS Compatibile - Sistema Avanzato */
  --font-ibm-pc: 'IBM Plex Mono', 'Courier New', 'Consolas', 'Monaco', 'Menlo', 'Ubuntu Mono', 'DejaVu Sans Mono', monospace;
  --font-ibm-pc-fallback-1: 'Courier New';
  --font-ibm-pc-fallback-2: 'Consolas';
  --font-ibm-pc-fallback-3: 'Monaco';
  --font-ibm-pc-fallback-4: 'Menlo';
  --font-ibm-pc-fallback-5: 'Ubuntu Mono';
  --font-ibm-pc-fallback-6: 'DejaVu Sans Mono';
  --font-ibm-pc-fallback-final: monospace;
  --font-ibm-pc-weight-normal: 400;
  --font-ibm-pc-weight-bold: 600;
  --font-ibm-pc-letter-spacing: 0.02em;
  --font-ibm-pc-line-height: 1.25;
  --font-ibm-pc-size-base: 0.875rem;
  --font-ibm-pc-size-small: 0.75rem;
  --font-ibm-pc-size-large: 1rem;
  
  /* Colori Fosfori - Mappatura da scala numerica Tailwind */
  --phosphor-primary: #22c55e;     /* phosphor-500 */
  --phosphor-dim: #15803d;         /* phosphor-700 */
  --phosphor-bright-intense: #4ade80; /* phosphor-400 */
  
  /* Sfondi e Pannelli */
  --phosphor-bg: #000000;
  --phosphor-bg-soft: #0A0A0A;
  --phosphor-bg-panel: #111111;
  --phosphor-bg-panel-bright: #1A1A1A;
  --phosphor-bg-panel-dark: #0D0D0D;
  
  /* Bordi */
  --phosphor-border: #22c55e;      /* phosphor-500 */
  
  /* Colori Mappa - Mantenuti per compatibilità */
  --phosphor-water: #008888;
  
  /* Colore testo notturno */
  --phosphor-night-blue: #00BFFF;
  
  /* Colori messaggi diario - v0.4.1 "Enhanced Colors" */
  --journal-welcome: #FFD700;     /* Giallo acceso per benvenuto */
  --journal-standard: var(--phosphor-primary); /* Verde standard */
  --journal-river: var(--phosphor-water);      /* Blu acqua per fiumi */
  --journal-warning: #FFA500;     /* Arancione per avvertimenti */
  --journal-ambiance: var(--phosphor-dim);     /* Verde scuro per atmosfera */
  --journal-success: #00FF7F;     /* Verde brillante per successi */
  --journal-failure: #FF4444;     /* Rosso per fallimenti */
  --journal-hp-recovery: #32CD32; /* Verde lime per guarigione */
  --journal-hp-damage: #DC143C;   /* Rosso cremisi per danni */
  --journal-rest: #87CEEB;        /* Azzurro per riposo */
  --journal-item: #FFD700;        /* Oro per oggetti */
  --journal-time-dawn: #FFA500;   /* Arancione alba */
  --journal-time-dusk: #4169E1;   /* Blu royal tramonto */
  --journal-time-night: #191970;  /* Blu notte */
  --journal-discovery: #FF69B4;   /* Rosa per scoperte */
  --journal-danger: #FF0000;      /* Rosso puro per pericoli */
  --journal-mystery: #9370DB;     /* Viola per misteri */
  
  /* Colori oggetti inventario - v0.4.1 "Enhanced Item Colors" */
  --item-weapon: #FF4444;         /* Rosso brillante per armi */
  --item-armor: #4169E1;          /* Blu royal per armature */
  --item-consumable: #00FF7F;     /* Verde spring per consumabili */
  --item-quest: #FFD700;          /* Oro per oggetti quest */
  --item-crafting: #DA70D6;       /* Orchidea per crafting */
  --item-unique: #FF1493;         /* Rosa profondo per oggetti unici */
  --item-potion: #00FFFF;         /* Ciano per pozioni */
  --item-common: #D3D3D3;         /* Grigio chiaro per comuni */
  --item-uncommon: #ADFF2F;       /* Verde giallo per non comuni */
  --item-rare: #1E90FF;           /* Blu dodger per rari */
  --item-epic: #8A2BE2;           /* Viola blu per epici */
  --item-legendary: #FF8C00;      /* Arancione scuro per leggendari */
  
  /* Container System - Preparazione */
  --game-width: 1920px;
  --game-height: 1080px;
  --scale-ratio: 1;
}

/* Controlla la scala globale di tutti i font definiti in rem */
html {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  font-size: 115%;
  /* overflow: hidden; */ /* Rimosso per permettere ai popup di essere visibili */
  box-sizing: border-box;
}

body {
  background-color: var(--phosphor-bg);
  color: var(--phosphor-primary);
  font-family: var(--font-ibm-pc);
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  /* overflow: hidden; */ /* Rimosso per permettere ai popup di essere visibili */
  box-sizing: border-box;
}

#app-wrapper {
  position: relative;
  z-index: 0;
  width: 100%;
  height: 100%;
}

#root {
  width: 100%;
  height: 100%;
  overflow: hidden;
}

/* Game Container System */
.game-container-wrapper {
  width: 100vw;
  height: 100vh;
  position: relative;
  overflow: hidden;
  background: radial-gradient(
    ellipse at center,
    var(--phosphor-bg-soft) 0%,
    var(--phosphor-bg) 70%,
    var(--phosphor-bg) 100%
  );
}

.game-container {
  width: var(--game-width);
  height: var(--game-height);
  transform: scale(var(--scale-ratio));
  transform-origin: center center;
  position: absolute;
  top: 50%;
  left: 50%;
  margin-left: calc(var(--game-width) * -0.5);
  margin-top: calc(var(--game-height) * -0.5);
  transition: transform 0.3s ease-out;
  background: linear-gradient(
    135deg,
    var(--phosphor-bg-panel-dark) 0%,
    var(--phosphor-bg-panel) 50%,
    var(--phosphor-bg-panel-bright) 100%
  );
  border: 2px solid var(--phosphor-border);
  box-shadow: 
    0 0 20px rgba(78, 161, 98, 0.3),
    0 0 40px rgba(78, 161, 98, 0.1),
    inset 0 0 20px rgba(0, 0, 0, 0.5);
  animation: crt-warmup 3s ease-out, crt-flicker 4s ease-in-out infinite 3s;
  
  /* Curvatura schermo CRT */
  border-radius: 2.5em;
  overflow: hidden;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(ellipse at center, rgba(0,0,0,0) 0%, rgba(0,0,0,0.5) 100%);
    z-index: 2;
    pointer-events: none;
    border-radius: inherit;
  }
}

/* Disabilita animazione warmup per interfaccia di gioco */
.game-container.no-warmup {
  animation: crt-flicker 4s ease-in-out infinite;
}

/* Classe per testo notturno */
.text-phosphor-night-blue {
  color: var(--phosphor-night-blue);
}

/* CRT Warm-up Animation */
@keyframes crt-warmup {
  0% {
    opacity: 0.1;
    filter: brightness(0.2) contrast(0.6) saturate(0.8);
    transform: scale(var(--scale-ratio)) scale(0.9, 0.7);
  }
  20% {
    opacity: 0.3;
    filter: brightness(0.4) contrast(0.7) saturate(0.85);
    transform: scale(var(--scale-ratio)) scale(0.95, 0.8);
  }
  40% {
    opacity: 0.8;
    filter: brightness(0.7) contrast(0.9) saturate(0.9);
    transform: scale(var(--scale-ratio)) scale(1.02, 1.02);
  }
  60% {
    opacity: 1;
    filter: brightness(1) contrast(1) saturate(1);
    transform: scale(var(--scale-ratio)) scale(1, 1);
  }
  75% {
    opacity: 0.98;
    filter: brightness(0.95) contrast(1) saturate(1);
  }
  100% {
    opacity: 1;
    filter: brightness(1) contrast(1) saturate(1);
  }
}

/* Player Animation */
@keyframes player-pulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
    text-shadow: 0 0 10px currentColor, 0 0 20px currentColor;
  }
  50% {
    opacity: 0.7;
    transform: scale(1.1);
    text-shadow: 0 0 15px currentColor, 0 0 30px currentColor, 0 0 45px currentColor;
  }
}

/* Player Blinking Animation - v0.1.3 */
@keyframes player-blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

/* CRT Flicker Animation */
@keyframes crt-flicker {
  0%, 100% {
    opacity: 1;
    filter: brightness(1) contrast(1);
  }
  1% {
    opacity: 0.98;
    filter: brightness(0.98) contrast(0.98);
  }
  2% {
    opacity: 1;
    filter: brightness(1) contrast(1);
  }
  50% {
    opacity: 0.99;
    filter: brightness(0.99) contrast(0.99);
  }
  51% {
    opacity: 1;
    filter: brightness(1) contrast(1);
  }
}



/* Phosphor Glow Effects - Sistema Avanzato */
.game-container * {
  font-family: 'Consolas', 'Monaco', 'Menlo', 'Ubuntu Mono', 'DejaVu Sans Mono', 'Courier New', monospace;
  text-shadow: 
    0 0 2px var(--phosphor-primary),
    0 0 4px var(--phosphor-primary),
    0 0 6px var(--phosphor-primary);
  animation: phosphor-decay 0.2s ease-out;
}

/* Phosphor Decay Animation */
@keyframes phosphor-decay {
  0% {
    text-shadow: 
      0 0 4px var(--phosphor-primary),
      0 0 8px var(--phosphor-primary),
      0 0 12px var(--phosphor-primary);
  }
  100% {
    text-shadow: 
      0 0 2px var(--phosphor-primary),
      0 0 4px var(--phosphor-primary),
      0 0 6px var(--phosphor-primary);
  }
}

/* Componenti base per il tema fosfori - Sistema Avanzato */
.panel {
  background: linear-gradient(
    135deg,
    var(--phosphor-bg-panel-dark) 0%,
    var(--phosphor-bg-panel) 50%,
    var(--phosphor-bg-panel-bright) 100%
  );
  border: 1px solid var(--phosphor-border);
  padding: 1rem;
  border-radius: 0;
  position: relative;
  z-index: 5;
  box-shadow: 
    inset 0 0 10px rgba(0, 0, 0, 0.3),
    0 0 5px rgba(78, 161, 98, 0.2),
    0 2px 4px rgba(0, 0, 0, 0.4);
  animation: panel-warmup 2s ease-out 1s both;
}

/* Panel Warm-up */
@keyframes panel-warmup {
  0% {
    opacity: 0.3;
    filter: brightness(0.5);
  }
  100% {
    opacity: 1;
    filter: brightness(1);
  }
}

/* NOTA: Classe .panel-title rimossa - ora utilizzata utility Tailwind */
/* Sostituita con: text-phosphor-bright font-mono text-lg font-bold uppercase */

/* NOTA: Classi .button-primary e .button-secondary rimosse */
/* Ora utilizzate utilities Tailwind con componenti personalizzati */

/* NOTA: Classe .text-glow rimossa - ora utilizzata utility Tailwind animate-glow */

@keyframes glow {
  0% { 
    text-shadow: 
      0 0 5px var(--phosphor-primary), 
      0 0 10px var(--phosphor-primary), 
      0 0 15px var(--phosphor-primary),
      0 0 20px var(--phosphor-primary);
  }
  100% { 
    text-shadow: 
      0 0 10px var(--phosphor-bright-intense), 
      0 0 20px var(--phosphor-bright-intense), 
      0 0 30px var(--phosphor-bright-intense),
      0 0 40px var(--phosphor-bright-intense);
  }
}

/* NOTA: Classi text-phosphor-*, bg-phosphor-*, border-phosphor-* rimosse */
/* Ora utilizzate le utilities Tailwind: text-phosphor-primary, text-phosphor-bright, etc. */
/* Definite in tailwind.config.js nella sezione colors.phosphor */

/* Classi colori diario - v0.4.1 "Enhanced Colors" */
.journal-welcome { 
  color: var(--journal-welcome) !important; 
  text-shadow: 
    0 0 4px var(--journal-welcome),
    0 0 8px var(--journal-welcome) !important;
}
.journal-standard { 
  color: var(--journal-standard) !important; 
  text-shadow: 
    0 0 3px var(--journal-standard),
    0 0 6px var(--journal-standard) !important;
}
.journal-river { 
  color: var(--journal-river) !important; 
  text-shadow: 
    0 0 4px var(--journal-river),
    0 0 8px var(--journal-river) !important;
}
.journal-warning { 
  color: var(--journal-warning) !important; 
  text-shadow: 
    0 0 3px var(--journal-warning),
    0 0 6px var(--journal-warning) !important;
}
.journal-ambiance { 
  color: var(--journal-ambiance) !important; 
  text-shadow: 
    0 0 2px var(--journal-ambiance),
    0 0 4px var(--journal-ambiance) !important;
}
.journal-success { 
  color: var(--journal-success) !important; 
  text-shadow: 
    0 0 3px var(--journal-success),
    0 0 6px var(--journal-success) !important;
}
.journal-failure { 
  color: var(--journal-failure) !important; 
  text-shadow: 
    0 0 3px var(--journal-failure),
    0 0 6px var(--journal-failure) !important;
}
.journal-hp-recovery { 
  color: var(--journal-hp-recovery) !important; 
  text-shadow: 
    0 0 3px var(--journal-hp-recovery),
    0 0 6px var(--journal-hp-recovery) !important;
}
.journal-hp-damage { 
  color: var(--journal-hp-damage) !important; 
  text-shadow: 
    0 0 3px var(--journal-hp-damage),
    0 0 6px var(--journal-hp-damage) !important;
}
.journal-rest { 
  color: var(--journal-rest) !important; 
  text-shadow: 
    0 0 3px var(--journal-rest),
    0 0 6px var(--journal-rest) !important;
}
.journal-item { 
  color: var(--journal-item) !important; 
  text-shadow: 
    0 0 3px var(--journal-item),
    0 0 6px var(--journal-item) !important;
}
.journal-time-dawn { 
  color: var(--journal-time-dawn) !important; 
  text-shadow: 
    0 0 3px var(--journal-time-dawn),
    0 0 6px var(--journal-time-dawn) !important;
}
.journal-time-dusk { 
  color: var(--journal-time-dusk) !important; 
  text-shadow: 
    0 0 3px var(--journal-time-dusk),
    0 0 6px var(--journal-time-dusk) !important;
}
.journal-time-night { 
  color: var(--journal-time-night) !important; 
  text-shadow: 
    0 0 3px var(--journal-time-night),
    0 0 6px var(--journal-time-night) !important;
}
.journal-discovery { 
  color: var(--journal-discovery) !important; 
  text-shadow: 
    0 0 3px var(--journal-discovery),
    0 0 6px var(--journal-discovery) !important;
}
.journal-danger { 
  color: var(--journal-danger) !important; 
  text-shadow: 
    0 0 3px var(--journal-danger),
    0 0 6px var(--journal-danger) !important;
}
.journal-mystery { 
  color: var(--journal-mystery) !important; 
  text-shadow: 
    0 0 3px var(--journal-mystery),
    0 0 6px var(--journal-mystery) !important;
}

/* Classi colori oggetti inventario - v0.4.1 "Item Colors" */
.item-weapon { 
  color: var(--item-weapon) !important; 
  text-shadow: 
    0 0 3px var(--item-weapon),
    0 0 6px var(--item-weapon) !important;
}
.item-armor { 
  color: var(--item-armor) !important; 
  text-shadow: 
    0 0 3px var(--item-armor),
    0 0 6px var(--item-armor) !important;
}
.item-consumable { 
  color: var(--item-consumable) !important; 
  text-shadow: 
    0 0 3px var(--item-consumable),
    0 0 6px var(--item-consumable) !important;
}
.item-quest { 
  color: var(--item-quest) !important; 
  text-shadow: 
    0 0 3px var(--item-quest),
    0 0 6px var(--item-quest) !important;
}
.item-crafting { 
  color: var(--item-crafting) !important; 
  text-shadow: 
    0 0 3px var(--item-crafting),
    0 0 6px var(--item-crafting) !important;
}
.item-unique { 
  color: var(--item-unique) !important; 
  text-shadow: 
    0 0 3px var(--item-unique),
    0 0 6px var(--item-unique) !important;
}
.item-potion { 
  color: var(--item-potion) !important; 
  text-shadow: 
    0 0 3px var(--item-potion),
    0 0 6px var(--item-potion) !important;
}
.item-common { 
  color: var(--item-common) !important; 
  text-shadow: 
    0 0 2px var(--item-common),
    0 0 4px var(--item-common) !important;
}
.item-uncommon { 
  color: var(--item-uncommon) !important; 
  text-shadow: 
    0 0 3px var(--item-uncommon),
    0 0 6px var(--item-uncommon) !important;
}
.item-rare { 
  color: var(--item-rare) !important; 
  text-shadow: 
    0 0 4px var(--item-rare),
    0 0 8px var(--item-rare) !important;
}
.item-epic { 
  color: var(--item-epic) !important; 
  text-shadow: 
    0 0 4px var(--item-epic),
    0 0 8px var(--item-epic) !important;
}
.item-legendary { 
  color: var(--item-legendary) !important; 
  text-shadow: 
    0 0 5px var(--item-legendary),
    0 0 10px var(--item-legendary) !important;
}

/* Text uniform size - esclusi i titoli */
.text-uniform {
  font-size: var(--font-ibm-pc-size-base);
  line-height: var(--font-ibm-pc-line-height);
  font-family: var(--font-ibm-pc);
  font-weight: var(--font-ibm-pc-weight-normal);
  letter-spacing: var(--font-ibm-pc-letter-spacing);
}

/* Font IBM PC Autentico */
.font-ibm-pc {
  font-family: var(--font-ibm-pc);
  font-weight: var(--font-ibm-pc-weight-normal);
  letter-spacing: var(--font-ibm-pc-letter-spacing);
  line-height: var(--font-ibm-pc-line-height);
}

/* Font IBM PC Varianti */
.font-ibm-pc-bold {
  font-family: var(--font-ibm-pc);
  font-weight: var(--font-ibm-pc-weight-bold);
  letter-spacing: var(--font-ibm-pc-letter-spacing);
}

.font-ibm-pc-small {
  font-family: var(--font-ibm-pc);
  font-size: var(--font-ibm-pc-size-small);
  font-weight: var(--font-ibm-pc-weight-normal);
  letter-spacing: var(--font-ibm-pc-letter-spacing);
}

.font-ibm-pc-large {
  font-family: var(--font-ibm-pc);
  font-size: var(--font-ibm-pc-size-large);
  font-weight: var(--font-ibm-pc-weight-normal);
  letter-spacing: var(--font-ibm-pc-letter-spacing);
}

/* Fallback System per Browser Compatibility */
.font-ibm-pc-fallback {
  font-family: var(--font-ibm-pc);
}

/* Fallback specifici per browser */
.font-ibm-pc-windows {
  font-family: 'IBM Plex Mono', var(--font-ibm-pc-fallback-1), var(--font-ibm-pc-fallback-2), var(--font-ibm-pc-fallback-final);
}

.font-ibm-pc-mac {
  font-family: 'IBM Plex Mono', var(--font-ibm-pc-fallback-3), var(--font-ibm-pc-fallback-4), var(--font-ibm-pc-fallback-final);
}

.font-ibm-pc-linux {
  font-family: 'IBM Plex Mono', var(--font-ibm-pc-fallback-5), var(--font-ibm-pc-fallback-6), var(--font-ibm-pc-fallback-final);
}

/* Utility per nascondere la scrollbar */
.no-scrollbar::-webkit-scrollbar {
  display: none;
}
.no-scrollbar {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}



/* ===== THEME OVERRIDES ===== */

/* NO EFFECTS THEME - Disabilita tutti gli effetti CRT */
.theme-no-effects .game-container::before,
.theme-no-effects .game-container::after,
.theme-no-effects .game-container .crt-noise,
.theme-no-effects .game-container .crt-gradient-overlay {
  display: none !important;
}

.theme-no-effects .game-container {
  filter: none !important;
  animation: none !important;
  /* transform: none !important; <-- RIMOSSO: Causa un bug strutturale disabilitando lo scaling del layout. */
}

.theme-no-effects * {
  text-shadow: none !important;
  animation: none !important;
}

.theme-no-effects .panel {
  background: var(--phosphor-bg-panel) !important;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2) !important;
  animation: none !important;
}

/* HIGH CONTRAST THEME - Colori ad alto contrasto */
.theme-high-contrast {
  --phosphor-primary: #00ff00;
  --phosphor-primary-bright: #66ff66;
  --phosphor-primary-dim: #00cc00;
  --phosphor-dim: #009900;
  --phosphor-dim-bright: #00bb00;
  --phosphor-bright: #88ff88;
  --phosphor-bright-intense: #aaffaa;
  --phosphor-glow: #ccffcc;
  --phosphor-highlight: #ffffff;
  --phosphor-accent: #ffff00;
  --phosphor-bg: #000000;
  --phosphor-bg-panel: #001100;
  --phosphor-bg-panel-dark: #000800;
  --phosphor-bg-panel-bright: #002200;
  --phosphor-border: #00ff00;
  --phosphor-border-dim: #00aa00;
  --phosphor-danger: #ff0000;
  --phosphor-danger-bright: #ff6666;
  --phosphor-warning: #ffff00;
  --phosphor-warning-bright: #ffff88;
}

.theme-high-contrast * {
  text-shadow: 
    0 0 1px currentColor,
    0 0 2px currentColor !important;
}

.theme-high-contrast .panel {
  border: 2px solid var(--phosphor-primary) !important;
  background: var(--phosphor-bg-panel) !important;
}

/* Scrollbar nascosta per il diario */
.scrollbar-hidden {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* Internet Explorer 10+ */
}

.scrollbar-hidden::-webkit-scrollbar {
  display: none; /* WebKit */
}

/* Utilità per inventario - v0.4.1 "Enhanced Selection" */
.hover\:scale-102:hover {
  transform: scale(1.02);
}

.scale-105 {
  transform: scale(1.05);
}

/* Ombra personalizzata per selezione inventario */
.shadow-phosphor-400\/50 {
  box-shadow: 0 10px 25px rgba(34, 197, 94, 0.5);
}
/* Scrollbar personalizzata in stile phosphor-green */
.scrollbar-phosphor {
  scrollbar-width: thin;
  scrollbar-color: #00ff00 #1a1a1a;
}

.scrollbar-phosphor::-webkit-scrollbar {
  width: 8px;
}

.scrollbar-phosphor::-webkit-scrollbar-track {
  background: #1a1a1a;
  border-radius: 4px;
}

.scrollbar-phosphor::-webkit-scrollbar-thumb {
  background: #00ff00;
  border-radius: 4px;
  border: 1px solid #1a1a1a;
}

.scrollbar-phosphor::-webkit-scrollbar-thumb:hover {
  background: #22c55e;
}

.scrollbar-phosphor::-webkit-scrollbar-corner {
  background: #1a1a1a;
}/
* Glow effects per feedback crafting */
.glow-green {
  box-shadow: 0 0 10px rgba(34, 197, 94, 0.5), 0 0 20px rgba(34, 197, 94, 0.3);
}

.glow-red {
  box-shadow: 0 0 10px rgba(239, 68, 68, 0.5), 0 0 20px rgba(239, 68, 68, 0.3);
}

.glow-phosphor {
  box-shadow: 0 0 10px rgba(0, 255, 0, 0.5), 0 0 20px rgba(0, 255, 0, 0.3);
}