# Log di Sviluppo - Versione 0.4.4

Questa versione introduce una delle meccaniche più attese e fondamentali per il ciclo di gioco di sopravvivenza: il **sistema di crafting**. Questa funzionalità si integra direttamente con il sistema dei rifugi, trasformando questi luoghi sicuri non solo in punti di riposo, ma anche in centri di produzione dove il giocatore può trasformare i materiali grezzi in oggetti utili.

### Dettagli dell'Implementazione

#### 1. Meccanica del Banco di Lavoro
- **Attivazione nei Rifugi:** L'opzione "Banco di Lavoro", precedentemente segnata come (WIP) nel menu dei rifugi, è stata attivata. Selezionandola, il giocatore accede a una nuova interfaccia a schermo intero dedicata al crafting.
- **Logica di Gioco:** Il crafting è un'azione che mette in pausa l'esplorazione ma consuma tempo di gioco, richiedendo al giocatore una gestione strategica delle proprie attività all'interno del rifugio.

#### 2. Architettura del Sistema di Crafting
Per garantire la scalabilità e la manutenibilità, il sistema di crafting è stato costruito con una struttura modulare.

- **Database delle Ricette:** È stato creato un nuovo file, `data/recipes.json`, che contiene tutte le ricette di crafting disponibili. Ogni ricetta definisce:
  - **Ingredienti Richiesti:** Un elenco di `itemId` e `quantity`.
  - **Oggetto Risultante:** L'`itemId` e la `quantity` dell'oggetto creato.
  - **Test di Abilità:** L'abilità richiesta (es. `sopravvivenza`, `medicina`) e la Classe di Difficoltà (CD) per avere successo.
  - **Costo in Tempo:** I minuti di gioco consumati dal tentativo di creazione.
- **Caricamento Asincrono:** Un nuovo store Zustand, `useRecipeDatabaseStore`, è stato creato per caricare dinamicamente il file delle ricette all'avvio del gioco, seguendo l'architettura robusta già implementata per oggetti ed eventi.

#### 3. Interfaccia di Crafting (`CraftingScreen.tsx`)
È stata creata una nuova schermata modale, interamente navigabile da tastiera, per gestire il processo di crafting.

- **Elenco Ricette:** Sulla sinistra, viene mostrato un elenco di tutte le ricette conosciute.
- **Feedback Visivo:** Le ricette per cui il giocatore possiede tutti gli ingredienti necessari sono evidenziate in bianco, mentre quelle non creabili sono in grigio, fornendo un feedback immediato sulla fattibilità.
- **Dettagli della Ricetta:** Selezionando una ricetta, sulla destra vengono mostrati tutti i dettagli: ingredienti, risultato, abilità e CD richieste, e costo in tempo.
- **Logica di Creazione:** Premendo `Invio`, il gioco avvia il processo di crafting.

#### 4. Risoluzione del Crafting
- **Controllo degli Ingredienti:** Il sistema verifica prima se il giocatore ha tutti i materiali necessari.
- **Test di Abilità:** Viene eseguito un test di abilità. Il risultato (successo o fallimento) viene comunicato nel Diario di Viaggio.
- **Conseguenze:**
  - **Successo:** Gli ingredienti vengono consumati, il tempo di gioco avanza, e l'oggetto risultante viene aggiunto all'inventario del giocatore.
  - **Fallimento:** Il tempo di gioco avanza comunque, e **metà degli ingredienti** (arrotondati per difetto, con un minimo di 1) vengono persi, rappresentando lo spreco di materiali in un tentativo maldestro.

#### 5. Contenuti Iniziali: Prime Ricette
Per popolare il sistema, sono state implementate 4 ricette di base che utilizzano materiali comuni trovabili nel mondo di gioco:
1.  **Benda Migliorata:** Combina bende e disinfettante per una cura più efficace (richiede `Medicina`).
2.  **Zuppa Riscaldante:** Usa acqua e verdure per creare un pasto che ripristina sia sazietà che idratazione (richiede `Sopravvivenza`).
3.  **Coltello di Fortuna:** Crea un'arma da mischia di base con rottami metallici e stoffa (richiede `Sopravvivenza`).
4.  **Frecce (x5):** Costruisci munizioni per armi ad arco usando legna e rottami (richiede `Sopravvivenza`).

### Conclusione
La versione 0.4.4 aggiunge un pilastro fondamentale al gameplay di "The Safe Place Chronicles". Il crafting introduce un ciclo virtuoso di **esplorazione -> raccolta -> creazione**, dando un nuovo scopo ai materiali trovati e offrendo al giocatore maggiore autonomia nella gestione della propria sopravvivenza. Questa meccanica arricchisce enormemente la profondità strategica e apre la strada a sistemi futuri più complessi, come la costruzione di basi e la riparazione di equipaggiamento avanzato.