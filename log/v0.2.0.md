# Log di Sviluppo - Versione 0.2.0

Questa versione segna il completamento del nucleo fondamentale delle meccaniche di gioco per "The Safe Place Chronicles". Il prototipo è ora giocabile e include un ciclo di gameplay completo basato sull'esplorazione, la sopravvivenza e la gestione delle risorse.

Di seguito un'analisi dettagliata delle funzionalità implementate.

### Dettagli dell'Implementazione

#### 1. Motore di Gioco e Struttura
- **Stack Tecnologico:** Il progetto è basato su **React** con **TypeScript** per la robustezza del codice e **Zustand** per una gestione dello stato globale efficiente e minimale. L'interfaccia è stilizzata con **TailwindCSS**.
- **Input System:** È stato implementato un sistema di input centralizzato (`useKeyboardInput` hook) che gestisce tutti i comandi da tastiera, garantendo un'esperienza "keyboard-only".
- **Scalabilità dell'Interfaccia:** L'interfaccia è progettata per una risoluzione nativa di 1920x1080 e utilizza un hook custom (`useGameScale`) per scalare dinamicamente e centrarsi in qualsiasi finestra del browser, mantenendo il corretto aspect ratio.

#### 2. Mondo e Movimento
- **Mappa di Gioco:** Il mondo è rappresentato da una vasta mappa 2D caricata da un file statico (`data/mapData.ts`).
- **Movimento su Griglia:** Il giocatore si muove su una griglia. Il sistema valida ogni mossa, impedendo l'accesso a terreni invalicabili (`M` - Montagne).
- **Costi di Movimento:**
    - **Costo Base:** Ogni passo consuma un ammontare base di tempo di gioco (10 minuti).
    - **Terreni Difficili:** Le foreste (`F`) raddoppiano il costo in tempo.
    - **Terreni Ostici:** I fiumi (`~`) richiedono due azioni per essere attraversati (una per entrare, una per uscire), raddoppiando di fatto il costo.

#### 3. Sistema Temporale e Meteorologico
- **Orologio di Gioco:** È presente un sistema temporale che traccia giorni, ore e minuti. Il tempo avanza solo in risposta alle azioni del giocatore.
- **Motore Meteorologico Dinamico:**
    - Il meteo cambia in base a una **matrice di transizioni probabilistiche**, garantendo cambiamenti realistici (es. da Sereno a Nuvoloso è più probabile che da Sereno a Tempesta).
    - Ogni condizione climatica (Sereno, Nuvoloso, Pioggia, Tempesta, Nebbia) ha una durata variabile.
    - Il meteo ha un impatto diretto sul gameplay:
        - **Pioggia e Tempesta** aumentano il tempo necessario per muoversi.
        - **Pioggia e Tempesta** aumentano il consumo di sazietà e idratazione.
        - La **Tempesta** ha una piccola probabilità di infliggere danni diretti al giocatore.

#### 4. Meccaniche di Sopravvivenza
- **Statistiche Vitali:** Il personaggio è dotato di **HP**, **Sazietà** e **Idratazione**.
- **Consumo Passivo:** Sazietà e idratazione diminuiscono costantemente con il passare del tempo di gioco. Il consumo è accelerato da condizioni meteorologiche avverse.
- **Conseguenze:** Sebbene non ancora implementato, il sistema è predisposto per applicare malus quando le statistiche di sopravvivenza raggiungono lo zero.

#### 5. Inventario e Oggetti
- **Database Oggetti:** Tutti gli oggetti del gioco sono definiti in un database centralizzato e hardcodato (`src/data/itemDatabase.ts`) che include statistiche, effetti e un colore specifico per categoria.
- **Inventario Modale:** Premendo `I` si accede a una schermata di inventario a schermo intero che mette in pausa il gioco.
- **Menu di Azione Contestuale:**
    - Selezionando un oggetto e premendo `Invio`, si apre un menu con azioni pertinenti.
    - **Consumabili:** `Usa` (ripristina le statistiche), `Scarta`.
    - **Equipaggiamento:** `Equipaggia`/`Togli`, `Scarta`.
- **Logica di Equipaggiamento:**
    - Gli oggetti equipaggiati **scompaiono dalla lista dell'inventario** e vengono visualizzati nel pannello Equipaggiamento.
    - Equipaggiare un nuovo oggetto quando lo slot è già occupato **rimette automaticamente l'oggetto precedente nell'inventario**.
    - L'azione "Togli" sposta l'oggetto equipaggiato di nuovo nell'inventario.

#### 6. Interfaccia Utente (UI)
- **Layout Multi-Pannello:** L'interfaccia di gioco è divisa in pannelli funzionali (Sopravvivenza, Statistiche, Equipaggiamento, Mappa, Informazioni, Inventario rapido, Comandi, Diario).
- **Dinamicità:** Tutti i pannelli sono collegati allo stato di gioco e si aggiornano in tempo reale.
- **Diario di Viaggio:** Un pannello dedicato registra cronologicamente tutti gli eventi di gioco significativi (cambiamenti del meteo, utilizzo di oggetti, danni subiti, ecc.), fornendo un feedback costante al giocatore.
- **Rendering della Mappa:** La mappa del mondo viene renderizzata su un elemento `<canvas>` utilizzando un tileset SVG personalizzato, con una telecamera che segue il giocatore.