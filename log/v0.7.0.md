# Log di Sviluppo - Versione 0.7.0

Questa versione segna l'implementazione della meccanica più complessa e attesa finora: il **sistema di combattimento a turni**. L'obiettivo non era solo creare un sistema funzionale, ma uno che fosse profondamente integrato con la filosofia del gioco: premiare l'astuzia sulla forza bruta e trasformare ogni scontro in un puzzle narrativo.

### Dettagli dell'Implementazione

#### 1. Architettura del Sistema di Combattimento
- **Nuovo Stato di Gioco:** È stato introdotto un `GameState.COMBAT` per isolare completamente la logica e l'interfaccia del combattimento dal resto del gioco.
- **Database Nemici Modulare:** È stato creato un nuovo database dedicato (`data/enemies.json`) e un loader asincrono (`data/enemyDatabase.ts`). Ogni nemico è definito da:
  - **Statistiche Base:** HP, Classe Armatura (AC), Attacco (danno e bonus al tiro).
  - **Valore in XP:** La ricompensa per la sconfitta.
  - **Debolezze Tattiche:** Un campo `tactics` che contiene la descrizione della debolezza e le azioni speciali che si sbloccano scoprendola.
- **Attivazione Casuale:** Il combattimento si attiva con una probabilità del 10% durante il movimento, rendendolo un evento significativo ma non troppo frequente.

#### 2. Interfaccia di Combattimento (`CombatScreen.tsx`)
- **Schermata Dedicata:** All'inizio di un combattimento, una nuova schermata modale sostituisce l'interfaccia di gioco standard.
- **Diario di Combattimento Narrativo:** L'elemento centrale è un diario testuale che descrive ogni azione (del giocatore e del nemico), i tiri di dado e i loro esiti, trasformando il combattimento in una storia che si svolge turno dopo turno.
- **Informazioni Nemiche Vaghe:** Per aumentare l'immersione, la salute del nemico non è mostrata come un numero, ma con descrizioni qualitative ("Illeso", "Ferito", "In fin di vita").

#### 3. Meccaniche di Gioco: "Sopravvivere, non Vincere"
- **Azione Chiave "Analizza":**
  - Il giocatore può spendere un turno per studiare il nemico.
  - L'azione richiede un test di **Percezione**. In caso di successo, il gioco rivela la debolezza tattica del nemico nel diario di combattimento.
  - **Sblocco di Azioni Tattiche:** Il successo sblocca nuove opzioni di combattimento uniche per quello scontro (es. "[Tattico] Mira alla gamba zoppa").
- **Fuga Strategica:**
  - La fuga è una tattica di sopravvivenza valida, non una sconfitta.
  - Richiede un test di abilità (`Furtività` o `Atletica`).
  - Il fallimento ha un costo: il nemico esegue un "attacco di opportunità" mentre il giocatore tenta di scappare.

#### 4. Integrazione delle Regole D&D-like
- **Tiro per Colpire:** Gli attacchi vengono risolti con un tiro di **d20 + modificatori vs Classe Armatura (AC)**.
- **Classe Armatura (AC):** La AC del giocatore viene calcolata dinamicamente come `10 + modificatore di Destrezza + bonus dell'armatura` equipaggiata.
- **Danno Variabile:** Il danno inflitto è basato sull'arma equipaggiata e include una leggera variabilità per simulare il tiro di un dado.

### Conclusione
Con la versione 0.7.0, "The Safe Place Chronicles" ha un sistema di combattimento completo che si sposa perfettamente con il suo tema survival. Ogni scontro è un puzzle che richiede osservazione e strategia, onorando il principio degli "insegnamenti del padre". Il ciclo di gameplay è ora completo in tutte le sue parti fondamentali, rendendo il prototipo un'esperienza di gioco ricca e coerente.