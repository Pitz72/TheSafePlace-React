<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    
    <style>
      body {
        font-family: 'VT323', monospace;
        background-color: #000;
        overflow: hidden;
      }

      /* --- Theme System using CSS Variables --- */

      /* 1. Standard Theme (Default) */
      .theme-standard {
        --bg-primary: #000;
        --text-primary: #4ade80; /* green-400 */
        --text-secondary: #d1d5db; /* gray-300 */
        --text-accent: #facc15; /* yellow-400 */
        --text-danger: #ef4444; /* red-500 */
        --border-primary: rgba(74, 222, 128, 0.3);
        --border-accent: rgba(250, 204, 21, 0.5);
        --highlight-bg: var(--text-primary);
        --highlight-text: var(--bg-primary);
        --shadow-primary: rgba(74, 222, 128, 0.3);
        --shadow-accent: rgba(250, 204, 21, 0.2);
        --scanline-opacity: 0;
        --vignette-opacity: 0;
        --text-glow: 0 0 5px var(--shadow-primary);
      }

      /* 2. Green Phosphor CRT Theme */
      .theme-crt {
        --bg-primary: #0a140a;
        --text-primary: #4ade80;
        --text-secondary: #4ade80;
        --text-accent: #86efac;
        --text-danger: #86efac;
        --border-primary: rgba(74, 222, 128, 0.3);
        --border-accent: rgba(134, 239, 172, 0.4);
        --highlight-bg: var(--text-primary);
        --highlight-text: #000;
        --shadow-primary: rgba(74, 222, 128, 0.5);
        --shadow-accent: rgba(134, 239, 172, 0.3);
        --scanline-opacity: 0.15;
        --vignette-opacity: 1;
        --text-glow: 0 0 7px var(--text-primary), 0 0 2px rgba(255, 80, 80, 0.6);
      }

      /* 3. High Contrast Theme */
      .theme-high_contrast {
        --bg-primary: #000;
        --text-primary: #fff;
        --text-secondary: #fff;
        --text-accent: #fff;
        --text-danger: #fff;
        --border-primary: #fff;
        --border-accent: #fff;
        --highlight-bg: #fff;
        --highlight-text: #000;
        --shadow-primary: transparent;
        --shadow-accent: transparent;
        --scanline-opacity: 0;
        --vignette-opacity: 0;
        --text-glow: none;
      }

      /* --- Base Game Styles --- */
      #game-container {
        color: var(--text-primary);
        text-shadow: var(--text-glow);
        border-color: var(--border-primary);
        position: relative;
        font-size: 20px;
      }

      .theme-crt #game-container > .w-full.h-full.relative {
        animation: text-wobble 0.15s linear infinite;
        filter: blur(0.4px);
      }

      /* --- CRT Effects --- */
      #game-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        background-image: repeating-linear-gradient(0deg, transparent 0, transparent 1px, rgba(0,0,0,0.4) 1px, rgba(0,0,0,0.4) 2px);
        background-size: 100% 2px;
        opacity: var(--scanline-opacity);
        animation: scanline-scroll 8s linear infinite;
        z-index: 100;
      }

      #game-container::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        background: radial-gradient(ellipse at center, rgba(0,0,0,0) 50%, rgba(0,0,0,0.8) 100%);
        box-shadow: inset 0 0 150px 20px rgba(0,0,0,0.9);
        opacity: var(--vignette-opacity);
        animation: flicker 0.15s infinite;
        z-index: 99;
      }

      /* Custom animations */
      @keyframes text-wobble {
        0% { transform: translate3d(0,0,0); }
        25% { transform: translate3d(0.4px, -0.4px, 0); }
        50% { transform: translate3d(-0.4px, 0.4px, 0); }
        75% { transform: translate3d(0.4px, 0.4px, 0); }
        100% { transform: translate3d(0,0,0); }
      }

      @keyframes scanline-scroll {
        to { background-position-y: -100px; }
      }

      @keyframes yellow-flash {
        50% {
          color: var(--text-accent);
          text-shadow: 0 0 10px var(--text-accent);
        }
      }

      @keyframes cursor-blink {
        50% { opacity: 0; }
      }

      @keyframes flicker {
        0%, 100% { opacity: var(--vignette-opacity); }
        50% { opacity: calc(var(--vignette-opacity) * 0.9); }
      }

      .animate-yellow-flash {
        animation: yellow-flash 1.5s infinite;
      }

      .animate-cursor-blink {
        animation: cursor-blink 1s step-end infinite;
      }
    </style>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Un gioco Retrocomputazionale in stile PC anni 80 che omaggia i GDR testuali dell'epoca" />
    <meta name="keywords" content="GDR testuale, retro gaming, RPG, anni 80, text adventure, retrocomputing" />
    <meta name="author" content="The Safe Place Chronicles Team" />
    
    <!-- Open Graph (condivisione social) -->
    <meta property="og:title" content="THE SAFE PLACE CHRONICLES: The Echo of the Journey" />
    <meta property="og:description" content="Un gioco Retrocomputazionale in stile PC anni 80 che omaggia i GDR testuali dell'epoca" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/android-chrome-192.png" />
    
    <title>THE SAFE PLACE CHRONICLES: The Echo of the Journey</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>
